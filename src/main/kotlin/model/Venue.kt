package model

import io.ktor.client.*
import io.ktor.client.engine.cio.*
import io.ktor.client.engine.mock.*
import io.ktor.client.request.*
import io.ktor.client.statement.*
import io.ktor.http.*
import kotlinx.serialization.json.Json
import kotlinx.serialization.json.JsonElement
import kotlinx.serialization.json.JsonObject
import kotlinx.coroutines.*

/**
 * A data class representing a venue that can retrieve and store its own details from two separate APIs:
 * a static API (providing location/coordinate data) and a dynamic API (providing pricing and distance range data).
 *
 * @property venueName Name identifying the venue.
 */
data class Venue( val venueName : String, val isTestVenue : Boolean = false) {

    val mockEngine = HomeAssignmentApiMock().engine

    /**
     * Maps keys (as they appear in the dynamic or static API) to the corresponding property names in [Venue].
     */
    private val listOfVenueStaticApiFieldsRouteToVenueField = listOf<List<String>>(listOf("venue_raw","location","coordinates"))
    private val listOfVenueDynamicApiFieldsRouteToVenueField = listOf<List<String>>(listOf("venue_raw","delivery_specs","order_minimum_no_surcharge"),
        listOf("venue_raw","delivery_specs","delivery_pricing","base_price"),
        listOf("venue_raw","delivery_specs","delivery_pricing","distance_ranges"))
    var coordinates : List<String>? = null
    var orderMinimumNoSurcharge : Int? = null
    var basePrice : Int? = null
    var distanceRanges : List<String>? = null

    /**
     * Custom operator function that sets a property value in the [Venue] based on the provided JSON key.
     * This is primarily used within the class to map JSON fields from the APIs to the correct properties.
     *
     * @param key The property name in the JSON response.
     * @param value The parsed JSON element containing the property's value.
     */
    private operator fun set(key: String, value: JsonElement) {
        when(key) {
            "coordinates" -> this.coordinates = (value.toString().split(',')).asReversed()
            "order_minimum_no_surcharge" -> this.orderMinimumNoSurcharge = value.toString().toIntOrNull()
            "base_price" -> this.basePrice = value.toString().toInt()
            "distance_ranges" -> this.distanceRanges = value.toString().filterNot{ it == '[' || it == ']'}.split("{",  "}")
        }
    }

    /**
     * Asynchronously fetches venue data from both the static and dynamic API endpoints, then
     * populates the corresponding [Venue] properties.
     *
     * @throws Exception If any network or data-parsing error occurs during the API calls or JSON handling.
     */
    suspend fun fillVenueData(testing: Boolean) {

        val client = if (testing) HttpClient(mockEngine) else HttpClient(CIO)


        coroutineScope {

            val requestStaticApi = async { client.get(ApiUrlLink.STANDART_VENUE.value + venueName + "/" + ApiUrlLink.STATIC_API.value)}
            val requestDynamicApi = async { client.get(ApiUrlLink.STANDART_VENUE.value + venueName + "/" + ApiUrlLink.DYNAMIC_API.value)}

            try {
                val responseStaticApi : HttpResponse = requestStaticApi.await()
                val responseDynamicApi : HttpResponse = requestDynamicApi.await()

                check(responseStaticApi.status == HttpStatusCode.OK && responseDynamicApi.status == HttpStatusCode.OK){
                    "Static Api response status is ${responseStaticApi.status}, with message ${responseStaticApi.bodyAsText().substringAfter("\"message\":\"").substringBefore("\"")}" +
                            "Dynamic status is ${responseDynamicApi.status}, with message ${responseDynamicApi.bodyAsText().substringAfter("\"message\":\"").substringBefore("\"")}"
                }

                val mapOfStaticVenueData = Json.parseToJsonElement(responseStaticApi.bodyAsText()) as JsonObject
                val mapOfDynamicVenueData = Json.parseToJsonElement( responseDynamicApi.bodyAsText()) as JsonObject

                println(mapOfStaticVenueData)
                iterateThrowTheMapAndFillNeededFields(mapOfStaticVenueData, ApiUrlLink.STATIC_API.value)
                iterateThrowTheMapAndFillNeededFields(mapOfDynamicVenueData, ApiUrlLink.DYNAMIC_API.value)

            } catch (e: Exception) {
                println("Error fetching data in the fillVenueData function: ${e.message}")
                throw Exception(e)
            }
        }
    }


    fun iterateThrowTheMapAndFillNeededFields(mapOfVenueData : Map<String, JsonElement>, typeOfApi: String){
        when (typeOfApi) {
            ApiUrlLink.STATIC_API.value -> {
                listOfVenueStaticApiFieldsRouteToVenueField.forEach{ venueDatabject->
                    this[venueDatabject[venueDatabject.size - 1].removePrefix ("{").removeSuffix("}")] = recursiveGetNeededValueFromJson(mapOfVenueData as JsonObject, venueDatabject)!!
                }
            }
            ApiUrlLink.DYNAMIC_API.value -> {
                listOfVenueDynamicApiFieldsRouteToVenueField.forEach{ venueDatabject->
                    this[venueDatabject[venueDatabject.size - 1].removePrefix ("{").removeSuffix("}")] = recursiveGetNeededValueFromJson(mapOfVenueData as JsonObject, venueDatabject)!!
                }
            }
        }
    }


    internal fun recursiveGetNeededValueFromJson(jsonObject : JsonObject, listOfFields : List<String>, currentDepth : Int = 0) : JsonElement? {
        var neededValue : JsonElement? = null
        jsonObject.forEach {jsonElement ->
            if (jsonElement.key == listOfFields[currentDepth] ){
                if (currentDepth == listOfFields.size - 1){
                    neededValue = jsonElement.value
                }
                else {
                    neededValue = recursiveGetNeededValueFromJson(jsonElement.value as JsonObject, listOfFields, currentDepth + 1)
                }
            }
        }
        return neededValue
    }

}


//class created to simulate API calls in tests
class HomeAssignmentApiMock {
    val HAA_HELSINKI_STATIC_RESPONSE = """{"venue":{"id":"66fe419cd46e8b9f53fd6e5c","image_url":"https://image-resizer-proxy.development.dev.woltapi.com/assets/677fab0c2e9a6361713418b6","image_blurhash":"j2jQRa00hGTt;;gPmXKGcPTsPbpl","brand_logo_image_url":null,"brand_logo_image_blurhash":null,"brand_slug":null,"brand_name":null,"name":"Home Assignment Venue Helsinki","description":"This is a venue that's used in engineering home assignment. Please don't modify!","rating":null,"opening_times_schedule":[{"day":"Monday","formatted_times":"All day"},{"day":"Tuesday","formatted_times":"All day"},{"day":"Wednesday","formatted_times":"All day"},{"day":"Thursday","formatted_times":"All day"},{"day":"Friday","formatted_times":"All day"},{"day":"Saturday","formatted_times":"All day"},{"day":"Sunday","formatted_times":"All day"}],"delivery_times_schedule":[{"day":"Monday","formatted_times":"All day"},{"day":"Tuesday","formatted_times":"All day"},{"day":"Wednesday","formatted_times":"All day"},{"day":"Thursday","formatted_times":"All day"},{"day":"Friday","formatted_times":"All day"},{"day":"Saturday","formatted_times":"All day"},{"day":"Sunday","formatted_times":"All day"}],"group_order_enabled":true,"share_url":"https://wolt-com.development.dev.woltapi.com/fi/fin/helsinki/restaurant/home-assignment-venue-helsinki","delivery_methods":["takeaway","homedelivery"],"currency":"EUR","active_menu":null,"address":"Pohjoinen Rautatiekatu 21","city":"Helsinki","country":"FIN","type":"purchase","website":null,"substitutions_enabled":null,"post_code":"00100","product_line":"restaurant","secondary_product_line":"none","phone":null,"self_delivery":false,"timezone":"Europe/Helsinki","delivery_base_price":190,"delivery_geo_range":{"bbox":null,"type":"Polygon","coordinates":[[[24.77798142454613,60.057872481327195],[24.736928681312932,60.07459593838405],[24.703160875825034,60.094984998823186],[24.677980259331353,60.11826212767934],[24.66236796128651,60.14353791589927],[24.65694428928704,60.16984447982529],[24.661941836289664,60.19617212481639],[24.677192879654946,60.221507947052366],[24.7021321081485,60.24487492377632],[24.73581514283841,60.2653699679472],[24.776952641411924,60.28219940975918],[24.823959026294474,60.29471042371552],[24.87501410515314,60.302417050867746],[24.928135119999993,60.30501967088782],[24.981256134846845,60.302417050867746],[25.032311213705512,60.29471042371552],[25.07931759858809,60.28219940975918],[25.120455097161603,60.2653699679472],[25.154138131851486,60.24487492377632],[25.17907736034504,60.221507947052366],[25.194328403710323,60.19617212481639],[25.19932595071297,60.16984447982529],[25.193902278713477,60.14353791589927],[25.178289980668634,60.11826212767934],[25.159663039906956,60.1010432601264],[24.787678030715536,60.05529698419671],[24.77798142454613,60.057872481327195]]]},"service_fee_short_description":null,"service_fee_estimate":null,"feature_croatia_currency_selection_enabled":false,"show_eco_packaging":false,"is_pickup_friendly":false,"age_verification_method":"age_verification","trader_information":null,"show_delivery_preestimate_by_time":false,"merchant":{"id":"66fe40dfd46e8b9f53fd6e53","name":"Home Assignment merchant","business_id":"home-assignment-id-123","street_address":"Eteläinen Rautatiekatu 10","city":"Helsinki","post_code":"00100","country":"Finland"},"digital_services_act_information":{"name":"Home Assignment merchant","business_id":"home-assignment-id-123","address":"Eteläinen Rautatiekatu 10, 00100, Helsinki, Finland","self_certification":"The Partner is committed to only offering products and/or services that comply with the applicable laws.","report_item_url":"https://www.surveymonkey.com/r/VHFTCJX"},"slug":"home-assignment-venue-helsinki","venue_supports_wolt_pay":false,"group_order_id":null,"info":{"venue_info_service_fee_description":null,"venue_info_order_minimum":"€10.00","venue_info_base_delivery_price":"€1.90"},"zero_distance_fees":{"delivery_price":190}},"venue_raw":{"id":"66fe419cd46e8b9f53fd6e5c","name":"Home Assignment Venue Helsinki","image_url":"https://image-resizer-proxy.development.dev.woltapi.com/assets/677fab0c2e9a6361713418b6","image_blurhash":"j2jQRa00hGTt;;gPmXKGcPTsPbpl","brand_logo_image_url":null,"brand_logo_image_blurhash":null,"description":"This is a venue that's used in engineering home assignment. Please don't modify!","group_order_enabled":true,"share_url":"https://wolt-com.development.dev.woltapi.com/fi/fin/helsinki/restaurant/home-assignment-venue-helsinki","delivery_methods":["takeaway","homedelivery"],"currency":"EUR","opening_times":{"monday":[{"type":"open","value":0}],"tuesday":[],"wednesday":[],"thursday":[],"friday":[],"saturday":[],"sunday":[{"type":"close","value":86400}]},"preorder_specs":{"preorder_only":false,"time_step":5,"homedelivery_spec":{"earliest_timedelta":60,"latest_timedelta":8,"preorder_times":{"monday":[{"type":"open","value":0}],"tuesday":null,"wednesday":null,"thursday":null,"friday":null,"saturday":null,"sunday":[{"type":"close","value":86400}]}},"takeaway_spec":{"earliest_timedelta":50,"latest_timedelta":8,"preorder_times":{"monday":[{"type":"open","value":0}],"tuesday":null,"wednesday":null,"thursday":null,"friday":null,"saturday":null,"sunday":[{"type":"close","value":86400}]}},"eatin_spec":null},"ncd_allowed":true,"tipping":{"currency":"EUR","tip_amounts":[100,200,500],"max_amount":2000,"min_amount":50,"type":"pre_tipping_amount"},"delivery_note":null,"public_visible":false,"bag_fee":null,"comment_disabled":false,"short_description":null,"city_id":"58a462711c5ea23ce19e15ca","merchant":"66fe40dfd46e8b9f53fd6e53","show_allergy_disclaimer_on_menu":false,"price_range":0,"item_cards_enabled":false,"service_fee_description":"Helps us improve our delivery service further by bringing you new features to enjoy and providing exceptional customer support. The service fee may vary based on order value, selected venue, or delivery method.","food_tags":null,"allowed_payment_methods":["card","card_raw"],"food_safety_reports":null,"is_wolt_plus":false,"categories":null,"rating":null,"location":{"bbox":null,"type":"Point","coordinates":[24.92813512,60.17012143]},"string_overrides":{"weighted_items_popup_disclaimer":null,"restricted_item_bottom_sheet_title":"Restricted items","restricted_item_bottom_sheet_info":"Your order contains age-restricted items. Please confirm that you are of the legally required age to buy these items in your country and you are ready to show a valid photo ID at handoff.\n\nAre you allowed to purchase these items?","restricted_item_bottom_sheet_confirm":"Yes, I'm allowed"}},"order_minimum":1000}"""
    val HAA_STOCKHOLM_STATIC_RESPONSE = """{"venue":{"id":"66ff83329ee25f2fb7e962a6","image_url":"https://image-resizer-proxy.development.dev.woltapi.com/assets/677fb0cb2e9a6361713418cf","image_blurhash":"j2jQRa00hGTt;;gPmXKGcPTsPbpl","brand_logo_image_url":null,"brand_logo_image_blurhash":null,"brand_slug":null,"brand_name":null,"name":"Home Assignment Venue Stockholm","description":"This is a venue that's used in engineering home assignment. Please don't modify!","rating":null,"opening_times_schedule":[{"day":"Monday","formatted_times":"All day"},{"day":"Tuesday","formatted_times":"All day"},{"day":"Wednesday","formatted_times":"All day"},{"day":"Thursday","formatted_times":"All day"},{"day":"Friday","formatted_times":"All day"},{"day":"Saturday","formatted_times":"All day"},{"day":"Sunday","formatted_times":"All day"}],"delivery_times_schedule":[{"day":"Monday","formatted_times":"All day"},{"day":"Tuesday","formatted_times":"All day"},{"day":"Wednesday","formatted_times":"All day"},{"day":"Thursday","formatted_times":"All day"},{"day":"Friday","formatted_times":"All day"},{"day":"Saturday","formatted_times":"All day"},{"day":"Sunday","formatted_times":"All day"}],"group_order_enabled":true,"share_url":"https://wolt-com.development.dev.woltapi.com/sv/swe/stockholm/restaurant/home-assignment-venue-stockholm","delivery_methods":["takeaway","homedelivery"],"currency":"SEK","active_menu":null,"address":"Solnavägen 3H","city":"Stockholm","country":"SWE","type":"purchase","website":null,"substitutions_enabled":null,"post_code":"113 63","product_line":"restaurant","secondary_product_line":"none","phone":null,"self_delivery":false,"timezone":"Europe/Stockholm","delivery_base_price":900,"delivery_geo_range":{"bbox":null,"type":"Polygon","coordinates":[[[18.039073461128798,59.366102491137696],[18.046356923720776,59.36497598152632],[18.053068470437285,59.363146708856554],[18.058949901303233,59.360685077624844],[18.06377509867718,59.35768581260352],[18.067358731604223,59.354264299463054],[18.0695633628232,59.35055213143022],[18.070304687662667,59.34669203603941],[18.069554710056632,59.34283237940375],[18.067342743374958,59.339121460839976],[18.063754209046238,59.33570181766239],[18.058927290526192,59.33270475841308],[18.053047580799955,59.33024533295381],[18.04634093548248,59.32841793024796],[18.03906480835582,59.327292670106694],[18.03149840000001,59.32691272466978],[18.023931991644172,59.327292670106694],[18.01665586451754,59.32841793024796],[18.00994921920004,59.33024533295381],[18.0040695094738,59.33270475841308],[17.99924259095378,59.33570181766239],[17.99635476322395,59.338453732368976],[17.9986953735352,59.3410684613923],[18.0127666471829,59.3454766863041],[18.0187625486702,59.3444140904369],[18.0220463055186,59.3439764203359],[18.0259016745788,59.3441116382853],[18.0307102203369,59.3471078171971],[18.0365522488894,59.349473277975],[18.0416492611209,59.3519594138417],[18.03778376546953,59.366167253630515],[18.039073461128798,59.366102491137696]]]},"service_fee_short_description":null,"service_fee_estimate":null,"feature_croatia_currency_selection_enabled":false,"show_eco_packaging":false,"is_pickup_friendly":false,"age_verification_method":"age_verification","trader_information":null,"show_delivery_preestimate_by_time":false,"merchant":{"id":"66ff823b54a09a5a8d60c939","name":"Home Assignment Merchant Sweden","business_id":"home-assingment-id-234","street_address":"Solnavägen 3H","city":"Stockholm","post_code":"113 63","country":"Sweden"},"digital_services_act_information":{"name":"Home Assignment Merchant Sweden","business_id":"home-assingment-id-234","address":"Solnavägen 3H, 113 63, Stockholm, Sweden","self_certification":"The Partner is committed to only offering products and/or services that comply with the applicable laws.","report_item_url":"https://www.surveymonkey.com/r/VHFTCJX"},"slug":"home-assignment-venue-stockholm","venue_supports_wolt_pay":false,"group_order_id":null,"info":{"venue_info_service_fee_description":null,"venue_info_order_minimum":"SEK100.00","venue_info_base_delivery_price":"SEK9.00"},"zero_distance_fees":{"delivery_price":900}},"venue_raw":{"id":"66ff83329ee25f2fb7e962a6","name":"Home Assignment Venue Stockholm","image_url":"https://image-resizer-proxy.development.dev.woltapi.com/assets/677fb0cb2e9a6361713418cf","image_blurhash":"j2jQRa00hGTt;;gPmXKGcPTsPbpl","brand_logo_image_url":null,"brand_logo_image_blurhash":null,"description":"This is a venue that's used in engineering home assignment. Please don't modify!","group_order_enabled":true,"share_url":"https://wolt-com.development.dev.woltapi.com/sv/swe/stockholm/restaurant/home-assignment-venue-stockholm","delivery_methods":["takeaway","homedelivery"],"currency":"SEK","opening_times":{"monday":[{"type":"open","value":0}],"tuesday":[],"wednesday":[],"thursday":[],"friday":[],"saturday":[],"sunday":[{"type":"close","value":86400}]},"preorder_specs":{"preorder_only":false,"time_step":5,"homedelivery_spec":{"earliest_timedelta":60,"latest_timedelta":8,"preorder_times":{"monday":[{"type":"open","value":0}],"tuesday":null,"wednesday":null,"thursday":null,"friday":null,"saturday":null,"sunday":[{"type":"close","value":86400}]}},"takeaway_spec":{"earliest_timedelta":45,"latest_timedelta":8,"preorder_times":{"monday":[{"type":"open","value":0}],"tuesday":null,"wednesday":null,"thursday":null,"friday":null,"saturday":null,"sunday":[{"type":"close","value":86400}]}},"eatin_spec":null},"ncd_allowed":true,"tipping":{"currency":"SEK","tip_amounts":[1000,2000,3000],"max_amount":20000,"min_amount":100,"type":"pre_tipping_amount"},"delivery_note":null,"public_visible":false,"bag_fee":null,"comment_disabled":false,"short_description":null,"city_id":"58da4cdea3284104e8fd9ee0","merchant":"66ff823b54a09a5a8d60c939","show_allergy_disclaimer_on_menu":true,"price_range":0,"item_cards_enabled":false,"service_fee_description":"Helps us improve our delivery service further by bringing you new features to enjoy and providing exceptional customer support. The service fee may vary based on order value, selected venue, or delivery method.","food_tags":null,"allowed_payment_methods":["card","card_raw"],"food_safety_reports":null,"is_wolt_plus":false,"categories":null,"rating":null,"location":{"bbox":null,"type":"Point","coordinates":[18.0314984,59.3466978]},"string_overrides":{"weighted_items_popup_disclaimer":null,"restricted_item_bottom_sheet_title":"ID check upon delivery","restricted_item_bottom_sheet_info":"Your order contains items with an age limit that require checking your ID upon delivery. The name on your ID must match the name in your Wolt account. If you do not meet the age limit, the item or items will be returned to the store.\nAre you allowed to purchase these items?","restricted_item_bottom_sheet_confirm":"Yes, I am allowed"}},"order_minimum":10000}"""
    val HAA_BERLIN_STATIC_RESPONSE = """{"venue":{"id":"66ff8da8a1f763ec8dfd9c4a","image_url":"https://image-resizer-proxy.development.dev.woltapi.com/assets/677fb12f2e9a6361713418d1","image_blurhash":"j2jQRa00hGTt;;gPmXKGcPTsPbpl","brand_logo_image_url":null,"brand_logo_image_blurhash":null,"brand_slug":null,"brand_name":null,"name":"Home Assignment Venue Berlin","description":"This is a venue that's used in engineering home assignment. Please don't modify","rating":null,"opening_times_schedule":[{"day":"Monday","formatted_times":"All day"},{"day":"Tuesday","formatted_times":"All day"},{"day":"Wednesday","formatted_times":"All day"},{"day":"Thursday","formatted_times":"All day"},{"day":"Friday","formatted_times":"All day"},{"day":"Saturday","formatted_times":"All day"},{"day":"Sunday","formatted_times":"All day"}],"delivery_times_schedule":[{"day":"Monday","formatted_times":"All day"},{"day":"Tuesday","formatted_times":"All day"},{"day":"Wednesday","formatted_times":"All day"},{"day":"Thursday","formatted_times":"All day"},{"day":"Friday","formatted_times":"All day"},{"day":"Saturday","formatted_times":"All day"},{"day":"Sunday","formatted_times":"All day"}],"group_order_enabled":true,"share_url":"https://wolt-com.development.dev.woltapi.com/de/deu/berlin/restaurant/home-assignment-venue-berlin","delivery_methods":["homedelivery","takeaway"],"currency":"EUR","active_menu":null,"address":"Stralauer Allee 6","city":"Berlin","country":"DEU","type":"purchase","website":null,"substitutions_enabled":null,"post_code":"10245","product_line":"restaurant","secondary_product_line":"none","phone":null,"self_delivery":false,"timezone":"Europe/Berlin","delivery_base_price":190,"delivery_geo_range":{"bbox":null,"type":"Polygon","coordinates":[[[13.3190913296482,52.5237706165925],[13.3204040642919,52.52452911528],[13.3220525491993,52.5248032231594],[13.3238840424432,52.5248921178865],[13.3239277458891,52.5254211473495],[13.3248667000545,52.5278009709938],[13.3268100640567,52.5276016998148],[13.3266155544412,52.5326253630217],[13.3284642384926,52.532955819771],[13.3292007749842,52.5329362149884],[13.329638081598,52.5330217790823],[13.3304594984079,52.5333870632518],[13.3307990196734,52.5335028008878],[13.33175734342,52.5338070831572],[13.3323174821417,52.5339383497138],[13.3352663866072,52.5343141370027],[13.3371797093257,52.5345525896716],[13.3388469985899,52.5348719367231],[13.3402000103794,52.5350495231605],[13.3406363119117,52.5350721030165],[13.3410907625789,52.5350549400274],[13.3420504814798,52.535303229202],[13.3429680871729,52.5354067955951],[13.343529969871,52.5354065896739],[13.3436853120041,52.5361084963174],[13.3442984648827,52.5379814569504],[13.3445737523147,52.5385348360446],[13.3447376637081,52.5387486862468],[13.3406253334348,52.5392568033297],[13.3364887841506,52.54229747656],[13.3520124971804,52.5504678412703],[13.3591502191079,52.5463856752777],[13.3673441840743,52.5515491464452],[13.3690740119688,52.5485963324931],[13.3691710956057,52.5481411598538],[13.3720659656429,52.5487044908103],[13.3739382198435,52.547596560485],[13.3814489905016,52.5522648764776],[13.3825181048003,52.5518444415707],[13.3836242595285,52.5513104124312],[13.3863071356174,52.5534209965019],[13.3897410503763,52.5554261260642],[13.3914426191513,52.555295148227],[13.3921316295279,52.555183190244],[13.3924363647124,52.5555998660305],[13.3939385956265,52.5564473651593],[13.394211832649,52.5562734034185],[13.3942419609805,52.5560250608256],[13.3948979532132,52.5556281062779],[13.3963600781691,52.5555944548401],[13.3990093443734,52.5549722422453],[13.4015493279281,52.5548569953792],[13.4026103910553,52.5547862625399],[13.4027589826332,52.5557212413217],[13.4090125301214,52.5554230958449],[13.4124907305028,52.5552117031211],[13.4125668076002,52.5552020681343],[13.4126224939414,52.5551819223467],[13.4126604215641,52.5551442585056],[13.4126630536036,52.5550882006434],[13.4132617123328,52.5550798661652],[13.413809968898,52.5549421569451],[13.4146179789052,52.5549624601258],[13.4145891040797,52.5552490987147],[13.4144299797936,52.5561624467856],[13.4184082420691,52.5561731991336],[13.418424201197,52.5550801590198],[13.420792788491,52.5550842536386],[13.4235173071306,52.5550940420089],[13.4256030501239,52.5551044900264],[13.429206114594,52.5563893739165],[13.4298142363416,52.5541918816323],[13.4305030596676,52.5519724733159],[13.430901633439,52.5519034174207],[13.4315450496135,52.552198217722],[13.4411826403317,52.5495067404654],[13.4467472405024,52.5477109670002],[13.4476991729899,52.5472280662728],[13.44807764744,52.5469141536741],[13.4517491780784,52.5453749710409],[13.4522028191724,52.5453202382351],[13.4534370549339,52.5446868114656],[13.4532092439241,52.5443700944484],[13.4550993364278,52.5436385993203],[13.4578425646755,52.5425053541137],[13.476462481726408,52.59319242026839],[13.534349548998197,52.5934587808886],[13.549467711429632,52.58927529584906],[13.54756888696318,52.57819943233667],[13.555194155168213,52.57098149334696],[13.568497031963833,52.56710930152712],[13.545802436475302,52.536975016102986],[13.527502615307187,52.529301707468434],[13.516653436148228,52.52613698219089],[13.514811834116593,52.52558059054911],[13.511529769748673,52.52230733106905],[13.504387929801773,52.52042335218266],[13.503400703043052,52.517182774216316],[13.500592212990952,52.5161789447091],[13.49810253101471,52.51506232303545],[13.495496204926841,52.51532592389219],[13.486900653810656,52.512754668151395],[13.49245254179158,52.511864157889505],[13.498998354220522,52.510868599878194],[13.4878325398949,52.5068237868802],[13.487121873502,52.5064930687963],[13.488049073091,52.5053696751539],[13.4834874288811,52.5033743991116],[13.4833437765439,52.5033204330653],[13.4834675424036,52.503065309036],[13.4829843747102,52.5029485446372],[13.4826656352341,52.5028258922144],[13.4813150781366,52.5025335320349],[13.4814081766798,52.5020061199015],[13.4778869028395,52.5017532679302],[13.4771078742168,52.5016926822079],[13.4753966040135,52.5019851402551],[13.4751834312623,52.501505408169],[13.4737324125126,52.5017224036707],[13.473605291934,52.5013913258613],[13.4718837463947,52.5016406993537],[13.4720150851328,52.5019745068382],[13.4696473315785,52.5023224667871],[13.469243715968,52.5017779276561],[13.4685778854095,52.5001900520045],[13.4680731841352,52.4988275844123],[13.4679149709904,52.4985045196098],[13.4675416847512,52.4980206193587],[13.4670137932173,52.4975565904997],[13.4661093517052,52.4968489830712],[13.4639923011611,52.495423069202],[13.462651967447,52.4941769633894],[13.4613076891601,52.4928731815848],[13.4609009624328,52.4923561439914],[13.4596895419595,52.4912050329811],[13.4590102041294,52.4908386199038],[13.4584688028208,52.489830743257],[13.4582636243998,52.4890801716444],[13.458146699202,52.4884540491169],[13.458219113709,52.4880681141052],[13.4584312481016,52.4874163515022],[13.4586470931277,52.4868195506993],[13.4591618341332,52.4862082228389],[13.4584546500058,52.4857639118166],[13.4583430970328,52.4858360466053],[13.4578359815292,52.4854710735078],[13.455163282453226,52.48359106424741],[13.451338117665312,52.48074504858855],[13.4478822283603,52.4778478250408],[13.4501473830921,52.4767449762499],[13.4497976090434,52.4763302306166],[13.4495829377772,52.4761498941575],[13.4493690393829,52.4759552418509],[13.4488410373376,52.4755919545208],[13.4493255747113,52.4750905200777],[13.4494118978994,52.4747701425659],[13.4494706540439,52.4745181308146],[13.4494272575492,52.4743256321663],[13.4493223883703,52.474074233066],[13.4491348010137,52.4735622392367],[13.448531358994,52.4730439066655],[13.4482262753638,52.4727934251782],[13.4474480585201,52.4725788919866],[13.4468551588026,52.4724672692807],[13.44569830877223,52.47194990533332],[13.444133035481942,52.47171816844404],[13.442917891536,52.4716713726546],[13.4430936655936,52.4705732985882],[13.4415074104637,52.4704126022052],[13.4416604879344,52.4697109752676],[13.4414324316086,52.4697416007128],[13.4388947420906,52.469511138779],[13.4356861461231,52.4690992445778],[13.4358651337135,52.4685376424543],[13.4311034384814,52.4678405413358],[13.4299913300317,52.4698497768513],[13.4297088775731,52.470356356758],[13.420471946875,52.4692975716908],[13.419794527287,52.4720447042188],[13.4188606120749,52.4753855528238],[13.4185606490029,52.4765476125236],[13.4183222492592,52.4767281110493],[13.4182731820063,52.4767922026282],[13.417906039551,52.4781628144417],[13.417872881957,52.4783467909773],[13.4178948841912,52.4784971195262],[13.4182010010637,52.4793345209721],[13.4180857606942,52.479738151104],[13.4179119387767,52.479719688249],[13.4178221227734,52.4800448521719],[13.4178702963273,52.4801488546409],[13.4184010124284,52.480084454202],[13.4189835639606,52.4800437309754],[13.4193088567303,52.4800726970549],[13.4196799896138,52.4800859765173],[13.4209846616931,52.4802420690586],[13.4209397478759,52.4804346880468],[13.4208889743097,52.4819805899558],[13.4207090738622,52.4819610757511],[13.4205994756877,52.4820186913481],[13.4205377208397,52.4820983326123],[13.4204087269826,52.4822203348531],[13.4203330710061,52.482927358295],[13.4203897389641,52.4832892355417],[13.4215303581696,52.4833107374845],[13.4214966443081,52.4840068755303],[13.42236492737,52.4840132721348],[13.4223587381356,52.4841275778769],[13.4231525123591,52.4841350495152],[13.4231562970792,52.4847846768315],[13.4224906086894,52.4848193318594],[13.4209056640417,52.4848155272637],[13.4210077994577,52.4862432487973],[13.4204581966245,52.4862630929275],[13.4202864380004,52.4863091426431],[13.4205897293068,52.487196785864],[13.418610406571,52.4874690194077],[13.4184616852665,52.4870888384915],[13.4152903429949,52.4875122941207],[13.4153969138788,52.4877996305529],[13.4154608423519,52.4879670611539],[13.413952719438,52.4881592915834],[13.4139034911218,52.4880302886773],[13.4137690390484,52.4876629529919],[13.4099795281239,52.4881146785308],[13.4099188611824,52.4878811536797],[13.4098932871974,52.4873940849232],[13.4089163673981,52.4872137173029],[13.4087388286449,52.487238004088],[13.4082195719351,52.4871210901168],[13.4081789833604,52.4870129653515],[13.4080995489433,52.4869032464055],[13.4078770349709,52.4867076085044],[13.4073302915742,52.4861972724624],[13.404357979405,52.485084311774],[13.4014609364901,52.4850845110361],[13.4002101027977,52.4836938131295],[13.3987342268689,52.4838419206299],[13.3943636136771,52.4839455696295],[13.3932474556459,52.4841379707811],[13.3880968975806,52.4844339369616],[13.386870203664,52.4847964808113],[13.3858986474706,52.4849592591428],[13.3713006548969,52.4850788321372],[13.3702929239534,52.4850740192467],[13.3662253890738,52.4782115648496],[13.3659148466105,52.4782660392569],[13.3654471488333,52.4774368107621],[13.3653210615897,52.47739605829],[13.3650501510507,52.4773668660921],[13.3648006533335,52.477369446966],[13.3639122236609,52.477965558686],[13.3634270181187,52.4781946921567],[13.3626266824489,52.4784625811288],[13.3605450272002,52.4791279149658],[13.3584148090341,52.4796908506189],[13.3570718602082,52.4798508870877],[13.3555006463659,52.479804096238],[13.3533769440718,52.4794962901213],[13.3520805658634,52.4789151648831],[13.3511645717262,52.4783824121061],[13.3505627457351,52.4787797737784],[13.3500687485181,52.4788113522509],[13.3488883783529,52.4785618405821],[13.3455624765502,52.4778178658014],[13.3448694167792,52.4782218415676],[13.3438922003544,52.4785387851427],[13.3428645235464,52.480700322039],[13.3421496463458,52.4826214962176],[13.3423840261352,52.4827111705887],[13.3450366679976,52.4826916985793],[13.3450612257731,52.4837287814019],[13.3450208749517,52.4838247378756],[13.3449871284633,52.4841983113455],[13.3438919457008,52.4842046743256],[13.3438991893978,52.4838986900768],[13.3432263057575,52.4838961909024],[13.3425874741232,52.4837528098408],[13.340369151678,52.4831623644647],[13.3383464875707,52.4823403560727],[13.3380780202448,52.4825815455729],[13.3371558498225,52.4822086536317],[13.337081211763,52.4822113791834],[13.3368977511837,52.4822810811744],[13.3359470379199,52.4818538987056],[13.3353476551939,52.4817027974668],[13.3348357615826,52.4816287280626],[13.3342842016225,52.4816305819681],[13.3337758658364,52.4817166056533],[13.3334201427056,52.4818022241965],[13.3332675300494,52.4818026291696],[13.3324481634707,52.4822905001259],[13.3309344009166,52.4831685584396],[13.3306328541162,52.4832468556651],[13.328583344779,52.4837239586789],[13.3284761356863,52.4838263546488],[13.3254026574357,52.4841882671648],[13.3246447163799,52.484228123754],[13.3234949767369,52.4842043882784],[13.3225840157321,52.4841870628449],[13.3223481148028,52.4842357085239],[13.3220016223339,52.4843801054949],[13.3214564351897,52.484070248327],[13.3202875984634,52.483683354664],[13.3202230011302,52.4838719669156],[13.320190702464,52.4841109083539],[13.3156440439821,52.484118490836],[13.3157009469454,52.4865046142456],[13.3155781045611,52.486533399755],[13.3156793229611,52.4888870828366],[13.3159803465095,52.4890919987251],[13.3148479042442,52.4899798943534],[13.3127771534966,52.4913651971953],[13.3111607184091,52.492626420675],[13.3100838387671,52.4936096402341],[13.3090193665402,52.4945963504136],[13.3085837639634,52.4952998155902],[13.3078858703568,52.49714627906],[13.3052742587916,52.496851580213],[13.3052109769599,52.4970739247136],[13.3049786162354,52.4972237240646],[13.3055704623039,52.4976789660583],[13.3053194367762,52.4978009682333],[13.3052993637175,52.4978883989224],[13.3055144125644,52.4996084868389],[13.3055861132948,52.499732390778],[13.3038470305565,52.4994043618939],[13.303934539039,52.5002178165888],[13.3038669958927,52.5019949889108],[13.3006023149037,52.5019452387247],[13.3007521506356,52.5032325719444],[13.3002211139006,52.504296710832],[13.2993072581054,52.5041126996664],[13.2991874517076,52.504296326944],[13.2954842785749,52.5034464325126],[13.2944834767674,52.50510199396],[13.2937833263994,52.5053218301938],[13.2950978300845,52.5068186930823],[13.2958333164713,52.5080870088408],[13.2938127181826,52.5087221658534],[13.2936781404903,52.5087901695281],[13.2915826015191,52.5103213332858],[13.2915549800713,52.5106111591708],[13.2922243662344,52.5106514493345],[13.2922063405214,52.5108442316177],[13.2922618804685,52.5109586607563],[13.2935176870517,52.5119029761871],[13.2939199048813,52.5122414800743],[13.294536214971,52.5130429255313],[13.2944683149525,52.5134262368028],[13.2966554566616,52.5135855678942],[13.2967006062921,52.5134449204846],[13.2968175779404,52.5133683794867],[13.297005634237,52.5133892787172],[13.2971166946962,52.5135075454144],[13.301197866249,52.5134586822097],[13.3005842304443,52.5171074857231],[13.3018392766246,52.517173185234],[13.3018395040249,52.5172458900204],[13.3019032753679,52.5173037322555],[13.3020480862028,52.5174124111845],[13.3022225868866,52.5174896617472],[13.3023989067716,52.5175425853538],[13.3026997420958,52.5175363473327],[13.3028812211358,52.5174888445669],[13.3030484735359,52.5173798282014],[13.3031182000615,52.5172458592542],[13.3065961617916,52.5174262644244],[13.315186156921,52.5146510657833],[13.3186426733359,52.5190881972565],[13.3187971347128,52.5192080593521],[13.3192759570819,52.5194605697783],[13.3173165644675,52.5203369259656],[13.3178726162716,52.5209281582161],[13.3182695445048,52.521735465517],[13.3185557416697,52.522910779911],[13.3190913296482,52.5237706165925]]]},"service_fee_short_description":null,"service_fee_estimate":null,"feature_croatia_currency_selection_enabled":false,"show_eco_packaging":false,"is_pickup_friendly":false,"age_verification_method":"consent_only","trader_information":null,"show_delivery_preestimate_by_time":false,"merchant":{"id":"66ff8d342be49bc5742b749c","name":"Home Assignment Merchant Germany","business_id":"home-assignment-id-345","street_address":"Stralauer Allee 6","city":"Berlin","post_code":"10245","country":"Germany"},"digital_services_act_information":{"name":null,"business_id":null,"address":null,"self_certification":"The Partner is committed to only offering products and/or services that comply with the applicable laws.","report_item_url":"https://www.surveymonkey.com/r/VHFTCJX"},"slug":"home-assignment-venue-berlin","venue_supports_wolt_pay":false,"group_order_id":null,"info":{"venue_info_service_fee_description":null,"venue_info_order_minimum":"€10.00","venue_info_base_delivery_price":"€1.90"},"zero_distance_fees":{"delivery_price":190}},"venue_raw":{"id":"66ff8da8a1f763ec8dfd9c4a","name":"Home Assignment Venue Berlin","image_url":"https://image-resizer-proxy.development.dev.woltapi.com/assets/677fb12f2e9a6361713418d1","image_blurhash":"j2jQRa00hGTt;;gPmXKGcPTsPbpl","brand_logo_image_url":null,"brand_logo_image_blurhash":null,"description":"This is a venue that's used in engineering home assignment. Please don't modify","group_order_enabled":true,"share_url":"https://wolt-com.development.dev.woltapi.com/de/deu/berlin/restaurant/home-assignment-venue-berlin","delivery_methods":["homedelivery","takeaway"],"currency":"EUR","opening_times":{"monday":[{"type":"open","value":0}],"tuesday":[],"wednesday":[],"thursday":[],"friday":[],"saturday":[],"sunday":[{"type":"close","value":86400}]},"preorder_specs":{"preorder_only":false,"time_step":5,"homedelivery_spec":{"earliest_timedelta":60,"latest_timedelta":8,"preorder_times":{"monday":[{"type":"open","value":0}],"tuesday":null,"wednesday":null,"thursday":null,"friday":null,"saturday":null,"sunday":[{"type":"close","value":86400}]}},"takeaway_spec":{"earliest_timedelta":45,"latest_timedelta":8,"preorder_times":{"monday":[{"type":"open","value":0}],"tuesday":null,"wednesday":null,"thursday":null,"friday":null,"saturday":null,"sunday":[{"type":"close","value":86400}]}},"eatin_spec":null},"ncd_allowed":true,"tipping":{"currency":"EUR","tip_amounts":[100,200,500],"max_amount":10000,"min_amount":50,"type":"pre_tipping_amount"},"delivery_note":null,"public_visible":false,"bag_fee":null,"comment_disabled":false,"short_description":null,"city_id":"6037589218390e7fe87d5d3d","merchant":"66ff8d342be49bc5742b749c","show_allergy_disclaimer_on_menu":false,"price_range":0,"item_cards_enabled":false,"service_fee_description":"Helps us improve our delivery service further by bringing you new features to enjoy and providing exceptional customer support. The service fee may vary based on order value, selected venue, or delivery method.","food_tags":null,"allowed_payment_methods":["card","card_raw"],"food_safety_reports":null,"is_wolt_plus":false,"categories":null,"rating":null,"location":{"bbox":null,"type":"Point","coordinates":[13.4536149,52.5003197]},"string_overrides":null},"order_minimum":1000}"""
    val HAA_TOKYO_STATIC_RESPONSE = """{"venue":{"id":"677faa42ebfdaa6f4a597064","image_url":"https://image-resizer-proxy.development.dev.woltapi.com/assets/677faa462e9a6361713418aa","image_blurhash":"j2jQRa00hGTt;;gPmXKWcPTsPbpl","brand_logo_image_url":null,"brand_logo_image_blurhash":null,"brand_slug":null,"brand_name":null,"name":"Home Assignment Venue Tokyo","description":"This is a venue that's used in engineering home assignment. Please don't modify!","rating":null,"opening_times_schedule":[{"day":"Monday","formatted_times":"All day"},{"day":"Tuesday","formatted_times":"All day"},{"day":"Wednesday","formatted_times":"All day"},{"day":"Thursday","formatted_times":"All day"},{"day":"Friday","formatted_times":"All day"},{"day":"Saturday","formatted_times":"All day"},{"day":"Sunday","formatted_times":"All day"}],"delivery_times_schedule":[{"day":"Monday","formatted_times":"All day"},{"day":"Tuesday","formatted_times":"All day"},{"day":"Wednesday","formatted_times":"All day"},{"day":"Thursday","formatted_times":"All day"},{"day":"Friday","formatted_times":"All day"},{"day":"Saturday","formatted_times":"All day"},{"day":"Sunday","formatted_times":"All day"}],"group_order_enabled":true,"share_url":"https://wolt-com.development.dev.woltapi.com/ja/jpn/tokyo/restaurant/home-assignment-venue-tokyo","delivery_methods":["takeaway","homedelivery"],"currency":"JPY","active_menu":null,"address":"Ebisu SS Building 3F, 4 Chome-3-14 Ebisu, Shibuya","city":"Tokyo","country":"JPN","type":"purchase","website":null,"substitutions_enabled":null,"post_code":"150-0013","product_line":"restaurant","secondary_product_line":"none","phone":null,"self_delivery":false,"timezone":"Asia/Tokyo","delivery_base_price":49,"delivery_geo_range":{"bbox":null,"type":"Polygon","coordinates":[[[139.64860463001352,35.65573170145694],[139.64857897329244,35.65797009072601],[139.64873972673234,35.658542406960805],[139.64870705430582,35.65908120718717],[139.64821296608426,35.6602799901988],[139.64783994317082,35.66163252416035],[139.64769040985777,35.66237614940301],[139.64747522780618,35.662947097505565],[139.64724991487964,35.663521045166455],[139.6470509427421,35.663994989748744],[139.6468114471025,35.66478384037048],[139.6466866351293,35.665089375066614],[139.6464370111829,35.665700444458885],[139.6461894170102,35.666044189044044],[139.64598316441163,35.666436358362624],[139.644124585153,35.67011263874437],[139.6449329323947,35.670807073126504],[139.64539443861577,35.67209208280998],[139.6471450350924,35.673216211903856],[139.64873439930756,35.67584262733999],[139.6498640193974,35.677602825699324],[139.65126673517304,35.68008613837202],[139.65366130046908,35.68099592185826],[139.6555125539412,35.68030871249306],[139.65677523367117,35.6799933580582],[139.65661071284052,35.682398324957425],[139.66128455568156,35.68176501852655],[139.66193471512292,35.68332050193162],[139.66349090011175,35.682793471949694],[139.66471937373032,35.68406710934007],[139.66513843589115,35.684661734223766],[139.66764975011574,35.684598252190305],[139.66875012798806,35.685053786569284],[139.6691320971507,35.685359848544465],[139.6705509011548,35.685063537551486],[139.67263391327228,35.68534491862913],[139.6724830878262,35.686386748307214],[139.6746063172344,35.68658365444854],[139.67914085453543,35.68789206501283],[139.6823537407888,35.688877971176815],[139.68735441374588,35.691135935458234],[139.68892170367405,35.68893326330435],[139.68938173833828,35.686148685046426],[139.6908302500841,35.68402896990271],[139.69357273742625,35.686474583475736],[139.70010214114575,35.68897833556754],[139.70442400771356,35.689515016195585],[139.7057739428925,35.6890172197458],[139.7134041842084,35.68674355388691],[139.72236715557813,35.687816615969986],[139.72930426626505,35.6859194236293],[139.73746591142003,35.68353168510174],[139.73878233770648,35.67890280958127],[139.74602128311597,35.679704519665506],[139.74933495118455,35.67678121145323],[139.7535829917177,35.67760629528407],[139.75950543626328,35.67525770028682],[139.7636891268496,35.67221275640007],[139.76648900698478,35.66990836244884],[139.77014303504464,35.66698399330963],[139.77189947425768,35.66519855819291],[139.77446226485435,35.66273012733961],[139.7715213425472,35.65928924557991],[139.76512208316836,35.65578499996205],[139.7629842070234,35.65153806424486],[139.7616093288662,35.651988085856004],[139.7597287152849,35.64560597059706],[139.76076923434874,35.64554409339006],[139.76026934453836,35.62766705755952],[139.76026884049918,35.62418809575482],[139.76022390880982,35.622592794092455],[139.76000575225777,35.61779147891419],[139.75470196865592,35.61827437599155],[139.75150522247122,35.61780155297467],[139.75085866755796,35.60653340894844],[139.74980215910102,35.60577230635508],[139.74905068883356,35.60425684617411],[139.74755919707638,35.60276989423723],[139.743409581356,35.60272943004213],[139.7425027355643,35.60016374342639],[139.74195431646382,35.59607448821961],[139.73839222290434,35.59677809020607],[139.73749285385102,35.59709555011801],[139.73270915069224,35.598199356276595],[139.73204179748376,35.598476626299615],[139.73135480270423,35.59886569243475],[139.73060315255637,35.59909523451549],[139.72543011443054,35.59908150259896],[139.72418428652963,35.599407328857176],[139.72286910136498,35.60012086908064],[139.72201804333787,35.60023454548506],[139.7213343339714,35.60032861115485],[139.71930194841087,35.60003089086827],[139.71770548185228,35.599695605706096],[139.7160249342664,35.59955522275767],[139.71471644424264,35.59997652119071],[139.71367906156934,35.600128244423985],[139.7131440689408,35.60038209087724],[139.71268456639837,35.60040177509862],[139.71178336963646,35.59557630383682],[139.70121439239318,35.600663532431824],[139.69764480983042,35.6037086234613],[139.69668533945134,35.60501557998732],[139.69614610515555,35.605605022115455],[139.69566647298345,35.60640807214949],[139.69407160156806,35.60853096647199],[139.691060798735,35.61055600922889],[139.68720685477527,35.61300783210365],[139.6832001741986,35.61587525656775],[139.68134499166143,35.61551272323591],[139.67929259281436,35.61506726280151],[139.67716665795263,35.61493268146738],[139.67375232554636,35.61479363031846],[139.67329599563516,35.61431733072121],[139.67297835893072,35.614543165016016],[139.6698844332351,35.61428757704405],[139.6697626690755,35.614907612600675],[139.66946045808368,35.615576546178],[139.66796541699935,35.61321960868503],[139.6664473100986,35.61381454379513],[139.66443368249327,35.613843690152805],[139.65833540106755,35.61374292828391],[139.6498063043403,35.611361305055254],[139.6481773353725,35.6133126311571],[139.64673814953775,35.616860771920756],[139.6485766657396,35.62033737785401],[139.65082170633607,35.62332216693017],[139.6486264555694,35.62420863001175],[139.645662294658,35.62622110316386],[139.64044364442358,35.62865450917478],[139.63947782792394,35.630606854802956],[139.6380417872457,35.63309259578375],[139.63737789037043,35.63451741500048],[139.63652768795467,35.63659762111203],[139.63533129555128,35.63757491070199],[139.63466930398096,35.63888382847563],[139.642687631785,35.64097665463656],[139.64428842111622,35.64162732903528],[139.64474767007084,35.642116064130676],[139.6449354422573,35.643338656196065],[139.64618194793218,35.64319280003161],[139.64466942483702,35.64576697355669],[139.6445169140241,35.64628634003639],[139.6445222083355,35.646564668244764],[139.644686469053,35.648289259027464],[139.6452503846567,35.64912997928399],[139.64567677700882,35.65051969764046],[139.6433458146344,35.65101780057314],[139.64335819569544,35.65248109614991],[139.6431162390044,35.65261167548282],[139.64305469859153,35.65281842498124],[139.64494584915366,35.65321027394353],[139.64633504002572,35.65356547650484],[139.6468249256398,35.65364572555013],[139.6470886151323,35.65380573290008],[139.64718739421843,35.65401573013142],[139.6473337834451,35.65422572736276],[139.64749690340878,35.654541959267235],[139.64788097533142,35.65475615432555],[139.64818475266276,35.655335473157905],[139.64860463001352,35.65573170145694]]]},"service_fee_short_description":null,"service_fee_estimate":null,"feature_croatia_currency_selection_enabled":false,"show_eco_packaging":false,"is_pickup_friendly":false,"age_verification_method":"consent_only","trader_information":null,"show_delivery_preestimate_by_time":false,"merchant":{"id":"677fa7fb02241d97eefd7ab7","name":"Home Assignment Merchant Japan","business_id":"12345","street_address":"Ebisu SS Building 3F, 4 Chome-3-14 Ebisu, Shibuya","city":"Tokyo","post_code":"150-0013","country":"Japan"},"digital_services_act_information":null,"slug":"home-assignment-venue-tokyo","venue_supports_wolt_pay":false,"group_order_id":null,"info":{"venue_info_service_fee_description":null,"venue_info_order_minimum":"¥700","venue_info_base_delivery_price":"¥49"},"zero_distance_fees":{"delivery_price":49}},"venue_raw":{"id":"677faa42ebfdaa6f4a597064","name":"Home Assignment Venue Tokyo","image_url":"https://image-resizer-proxy.development.dev.woltapi.com/assets/677faa462e9a6361713418aa","image_blurhash":"j2jQRa00hGTt;;gPmXKWcPTsPbpl","brand_logo_image_url":null,"brand_logo_image_blurhash":null,"description":"This is a venue that's used in engineering home assignment. Please don't modify!","group_order_enabled":true,"share_url":"https://wolt-com.development.dev.woltapi.com/ja/jpn/tokyo/restaurant/home-assignment-venue-tokyo","delivery_methods":["takeaway","homedelivery"],"currency":"JPY","opening_times":{"monday":[{"type":"open","value":0}],"tuesday":[],"wednesday":[],"thursday":[],"friday":[],"saturday":[],"sunday":[{"type":"close","value":86400}]},"preorder_specs":{"preorder_only":false,"time_step":5,"homedelivery_spec":{"earliest_timedelta":60,"latest_timedelta":8,"preorder_times":{"monday":[{"type":"open","value":0}],"tuesday":null,"wednesday":null,"thursday":null,"friday":null,"saturday":null,"sunday":[{"type":"close","value":86400}]}},"takeaway_spec":{"earliest_timedelta":45,"latest_timedelta":8,"preorder_times":{"monday":[{"type":"open","value":0}],"tuesday":null,"wednesday":null,"thursday":null,"friday":null,"saturday":null,"sunday":[{"type":"close","value":86400}]}},"eatin_spec":null},"ncd_allowed":true,"tipping":{"currency":"JPY","tip_amounts":[50,100,200],"max_amount":2000,"min_amount":10,"type":"pre_tipping_amount"},"delivery_note":null,"public_visible":false,"bag_fee":null,"comment_disabled":false,"short_description":null,"city_id":"5d97432e5863d4c9ed8e5a24","merchant":"677fa7fb02241d97eefd7ab7","show_allergy_disclaimer_on_menu":false,"price_range":0,"item_cards_enabled":false,"service_fee_description":"Helps us improve our delivery service further by bringing you new features to enjoy and providing exceptional customer support. The service fee may vary based on order value, selected venue, or delivery method.","food_tags":null,"allowed_payment_methods":["card","card_raw"],"food_safety_reports":null,"is_wolt_plus":false,"categories":null,"rating":null,"location":{"bbox":null,"type":"Point","coordinates":[139.7115264,35.6459122]},"string_overrides":null},"order_minimum":700}"""

    val HAA_HELSINKI_DYNAMIC_RESPONSE = """{"venue":{"delivery_open_status":{"value":"Open all day","style":{"icon":null,"type":"OPEN"},"is_open":true,"now":"2025-01-26T12:36:50.408234+02:00","previous_open":null,"next_open":null,"next_close":null,"next_close_time_localized":null},"id":"66fe419cd46e8b9f53fd6e5c","open_status":{"value":"Open all day","style":{"icon":null,"type":"OPEN"},"is_open":true,"now":"2025-01-26T12:36:50.408234+02:00","previous_open":null,"next_open":null,"next_close":null,"next_close_time_localized":null},"online":true,"time_slots_schedule":null,"banners":[],"header":{"delivery_method_default":"UNAVAILABLE","delivery_method_statuses":[{"delivery_method":"UNAVAILABLE","metadata":[{"type":"STRING","link":null,"icon":null,"style":"NORMAL","value":"Open all day"},{"type":"STRING","link":null,"icon":null,"style":"NORMAL","value":"Min. order €10.00"}],"call_to_action":{"icon":"LOCATION","style":"NO_FILL","enabled":true,"configurable":false,"value":"Choose location"},"group_order_button":{"enabled":false,"visible":false},"notification":null,"disclaimer":null}]},"delivery_configs":[]},"venue_raw":{"id":"66fe419cd46e8b9f53fd6e5c","favourite":false,"preestimate_total":{"min":40,"max":50,"mean":45},"preestimate_preparation":{"min":10,"max":30,"mean":20},"alive":true,"applepay_callback_flow_enabled":false,"googlepay_callback_flow_enabled":false,"discounts":[],"surcharges":[],"delivery_specs":{"delivery_enabled":true,"order_minimum_no_surcharge":1000,"order_minimum_possible":1000,"delivery_times":{"monday":[{"type":"open","value":0}],"tuesday":null,"wednesday":null,"thursday":null,"friday":null,"saturday":null,"sunday":[{"type":"close","value":86400}]},"original_delivery_price":190,"delivery_pricing":{"base_price":190,"price_ranges":[{"min":0,"max":1000,"a":1000,"b":-1.0,"flag":null,"custom_distance_ranges":null},{"min":1000,"max":0,"a":0,"b":0.0,"flag":null,"custom_distance_ranges":null}],"distance_ranges":[{"min":0,"max":500,"a":0,"b":0.0,"flag":null},{"min":500,"max":1000,"a":100,"b":0.0,"flag":null},{"min":1000,"max":1500,"a":200,"b":0.0,"flag":null},{"min":1500,"max":2000,"a":200,"b":1.0,"flag":null},{"min":2000,"max":0,"a":0,"b":0.0,"flag":null}],"meta":{"subscription_minimum_basket":null,"subscription_max_distance":null,"subscription_plan_id":null}},"delivery_pricing_with_subscription":null,"delivery_pricing_without_subscription":null,"geo_range":{"bbox":null,"type":"Polygon","coordinates":[[[24.77798142454613,60.057872481327195],[24.736928681312932,60.07459593838405],[24.703160875825034,60.094984998823186],[24.677980259331353,60.11826212767934],[24.66236796128651,60.14353791589927],[24.65694428928704,60.16984447982529],[24.661941836289664,60.19617212481639],[24.677192879654946,60.221507947052366],[24.7021321081485,60.24487492377632],[24.73581514283841,60.2653699679472],[24.776952641411924,60.28219940975918],[24.823959026294474,60.29471042371552],[24.87501410515314,60.302417050867746],[24.928135119999993,60.30501967088782],[24.981256134846845,60.302417050867746],[25.032311213705512,60.29471042371552],[25.07931759858809,60.28219940975918],[25.120455097161603,60.2653699679472],[25.154138131851486,60.24487492377632],[25.17907736034504,60.221507947052366],[25.194328403710323,60.19617212481639],[25.19932595071297,60.16984447982529],[25.193902278713477,60.14353791589927],[25.178289980668634,60.11826212767934],[25.159663039906956,60.1010432601264],[24.787678030715536,60.05529698419671],[24.77798142454613,60.057872481327195]]]}},"self_delivery":false,"payment_method_restrictions":null,"discounts_restrictions_text":"The following categories are excluded from offers: beer, wine, alcohol, tobacco, nicotine products, smokers items and accessories, medicine, baby formula, newspaper, magazines and lottery scratchcards","preorder_specs":{"preorder_only":false,"time_step":5,"homedelivery_spec":{"earliest_timedelta":60,"latest_timedelta":8,"preorder_times":{"monday":[{"type":"open","value":0}],"tuesday":null,"wednesday":null,"thursday":null,"friday":null,"saturday":null,"sunday":[{"type":"close","value":86400}]}},"takeaway_spec":{"earliest_timedelta":50,"latest_timedelta":8,"preorder_times":{"monday":[{"type":"open","value":0}],"tuesday":null,"wednesday":null,"thursday":null,"friday":null,"saturday":null,"sunday":[{"type":"close","value":86400}]}},"eatin_spec":null},"group_order_id":""},"is_venue_favourite":false,"order_status":{"value":""},"order_minimum":1000,"do_use_backend_pricing":"no"}"""
    val HAA_STOCKHOLM_DYNAMIC_RESPONSE = """{"venue":{"delivery_open_status":{"value":"Open all day","style":{"icon":null,"type":"OPEN"},"is_open":true,"now":"2025-01-26T13:26:32.776570+01:00","previous_open":null,"next_open":null,"next_close":null,"next_close_time_localized":null},"id":"66ff83329ee25f2fb7e962a6","open_status":{"value":"Open all day","style":{"icon":null,"type":"OPEN"},"is_open":true,"now":"2025-01-26T13:26:32.776570+01:00","previous_open":null,"next_open":null,"next_close":null,"next_close_time_localized":null},"online":true,"time_slots_schedule":null,"banners":[],"header":{"delivery_method_default":"UNAVAILABLE","delivery_method_statuses":[{"delivery_method":"UNAVAILABLE","metadata":[{"type":"STRING","link":null,"icon":null,"style":"NORMAL","value":"Open all day"},{"type":"STRING","link":null,"icon":null,"style":"NORMAL","value":"Min. order SEK100.00"},{"type":"LINK","link":"ALLERGEN_INFO","icon":null,"style":"NORMAL","value":"Allergens"}],"call_to_action":{"icon":"LOCATION","style":"NO_FILL","enabled":true,"configurable":false,"value":"Choose location"},"group_order_button":{"enabled":false,"visible":false},"notification":null,"disclaimer":null}]},"delivery_configs":[]},"venue_raw":{"id":"66ff83329ee25f2fb7e962a6","favourite":false,"preestimate_total":{"min":35,"max":45,"mean":40},"preestimate_preparation":{"min":10,"max":30,"mean":20},"alive":true,"applepay_callback_flow_enabled":false,"googlepay_callback_flow_enabled":false,"discounts":[],"surcharges":[],"delivery_specs":{"delivery_enabled":true,"order_minimum_no_surcharge":10000,"order_minimum_possible":10000,"delivery_times":{"monday":[{"type":"open","value":0}],"tuesday":null,"wednesday":null,"thursday":null,"friday":null,"saturday":null,"sunday":[{"type":"close","value":86400}]},"original_delivery_price":900,"delivery_pricing":{"base_price":900,"price_ranges":[{"min":0,"max":10000,"a":10000,"b":-1.0,"flag":null,"custom_distance_ranges":null},{"min":10000,"max":0,"a":0,"b":0.0,"flag":null,"custom_distance_ranges":null}],"distance_ranges":[{"min":0,"max":500,"a":0,"b":0.0,"flag":null},{"min":500,"max":1000,"a":1000,"b":0.0,"flag":null},{"min":1000,"max":1500,"a":2000,"b":0.0,"flag":null},{"min":1500,"max":2000,"a":2000,"b":10.0,"flag":null},{"min":2000,"max":0,"a":0,"b":0.0,"flag":null}],"meta":{"subscription_minimum_basket":null,"subscription_max_distance":null,"subscription_plan_id":null}},"delivery_pricing_with_subscription":null,"delivery_pricing_without_subscription":null,"geo_range":{"bbox":null,"type":"Polygon","coordinates":[[[18.039073461128798,59.366102491137696],[18.046356923720776,59.36497598152632],[18.053068470437285,59.363146708856554],[18.058949901303233,59.360685077624844],[18.06377509867718,59.35768581260352],[18.067358731604223,59.354264299463054],[18.0695633628232,59.35055213143022],[18.070304687662667,59.34669203603941],[18.069554710056632,59.34283237940375],[18.067342743374958,59.339121460839976],[18.063754209046238,59.33570181766239],[18.058927290526192,59.33270475841308],[18.053047580799955,59.33024533295381],[18.04634093548248,59.32841793024796],[18.03906480835582,59.327292670106694],[18.03149840000001,59.32691272466978],[18.023931991644172,59.327292670106694],[18.01665586451754,59.32841793024796],[18.00994921920004,59.33024533295381],[18.0040695094738,59.33270475841308],[17.99924259095378,59.33570181766239],[17.99635476322395,59.338453732368976],[17.9986953735352,59.3410684613923],[18.0127666471829,59.3454766863041],[18.0187625486702,59.3444140904369],[18.0220463055186,59.3439764203359],[18.0259016745788,59.3441116382853],[18.0307102203369,59.3471078171971],[18.0365522488894,59.349473277975],[18.0416492611209,59.3519594138417],[18.03778376546953,59.366167253630515],[18.039073461128798,59.366102491137696]]]}},"self_delivery":false,"payment_method_restrictions":null,"discounts_restrictions_text":"The following categories are excluded from offers: beer, wine, alcohol, tobacco, nicotine products, smokers items and accessories, baby formula and lottery scratchcards","preorder_specs":{"preorder_only":false,"time_step":5,"homedelivery_spec":{"earliest_timedelta":60,"latest_timedelta":8,"preorder_times":{"monday":[{"type":"open","value":0}],"tuesday":null,"wednesday":null,"thursday":null,"friday":null,"saturday":null,"sunday":[{"type":"close","value":86400}]}},"takeaway_spec":{"earliest_timedelta":45,"latest_timedelta":8,"preorder_times":{"monday":[{"type":"open","value":0}],"tuesday":null,"wednesday":null,"thursday":null,"friday":null,"saturday":null,"sunday":[{"type":"close","value":86400}]}},"eatin_spec":null},"group_order_id":""},"is_venue_favourite":false,"order_status":{"value":""},"order_minimum":10000,"do_use_backend_pricing":"no"}"""
    val HAA_BERLIN_DYNAMIC_RESPONSE = """{"venue":{"delivery_open_status":{"value":"Open all day","style":{"icon":null,"type":"OPEN"},"is_open":true,"now":"2025-01-26T13:26:39.080912+01:00","previous_open":null,"next_open":null,"next_close":null,"next_close_time_localized":null},"id":"66ff8da8a1f763ec8dfd9c4a","open_status":{"value":"Open all day","style":{"icon":null,"type":"OPEN"},"is_open":true,"now":"2025-01-26T13:26:39.080912+01:00","previous_open":null,"next_open":null,"next_close":null,"next_close_time_localized":null},"online":true,"time_slots_schedule":null,"banners":[],"header":{"delivery_method_default":"UNAVAILABLE","delivery_method_statuses":[{"delivery_method":"UNAVAILABLE","metadata":[{"type":"STRING","link":null,"icon":null,"style":"NORMAL","value":"Open all day"},{"type":"STRING","link":null,"icon":null,"style":"NORMAL","value":"Min. order €10.00"}],"call_to_action":{"icon":"LOCATION","style":"NO_FILL","enabled":true,"configurable":false,"value":"Choose location"},"group_order_button":{"enabled":false,"visible":false},"notification":null,"disclaimer":null}]},"delivery_configs":[]},"venue_raw":{"id":"66ff8da8a1f763ec8dfd9c4a","favourite":false,"preestimate_total":{"min":35,"max":45,"mean":40},"preestimate_preparation":{"min":10,"max":30,"mean":20},"alive":true,"applepay_callback_flow_enabled":false,"googlepay_callback_flow_enabled":false,"discounts":[],"surcharges":[],"delivery_specs":{"delivery_enabled":true,"order_minimum_no_surcharge":1000,"order_minimum_possible":1000,"delivery_times":{"monday":[{"type":"open","value":0}],"tuesday":null,"wednesday":null,"thursday":null,"friday":null,"saturday":null,"sunday":[{"type":"close","value":86400}]},"original_delivery_price":190,"delivery_pricing":{"base_price":190,"price_ranges":[{"min":0,"max":1000,"a":1000,"b":-1.0,"flag":null,"custom_distance_ranges":null},{"min":1000,"max":0,"a":0,"b":0.0,"flag":null,"custom_distance_ranges":null}],"distance_ranges":[{"min":0,"max":500,"a":0,"b":0.0,"flag":null},{"min":500,"max":1000,"a":100,"b":0.0,"flag":null},{"min":1000,"max":1500,"a":200,"b":0.0,"flag":null},{"min":1500,"max":2000,"a":200,"b":1.0,"flag":null},{"min":2000,"max":0,"a":0,"b":0.0,"flag":null}],"meta":{"subscription_minimum_basket":null,"subscription_max_distance":null,"subscription_plan_id":null}},"delivery_pricing_with_subscription":null,"delivery_pricing_without_subscription":null,"geo_range":{"bbox":null,"type":"Polygon","coordinates":[[[13.3190913296482,52.5237706165925],[13.3204040642919,52.52452911528],[13.3220525491993,52.5248032231594],[13.3238840424432,52.5248921178865],[13.3239277458891,52.5254211473495],[13.3248667000545,52.5278009709938],[13.3268100640567,52.5276016998148],[13.3266155544412,52.5326253630217],[13.3284642384926,52.532955819771],[13.3292007749842,52.5329362149884],[13.329638081598,52.5330217790823],[13.3304594984079,52.5333870632518],[13.3307990196734,52.5335028008878],[13.33175734342,52.5338070831572],[13.3323174821417,52.5339383497138],[13.3352663866072,52.5343141370027],[13.3371797093257,52.5345525896716],[13.3388469985899,52.5348719367231],[13.3402000103794,52.5350495231605],[13.3406363119117,52.5350721030165],[13.3410907625789,52.5350549400274],[13.3420504814798,52.535303229202],[13.3429680871729,52.5354067955951],[13.343529969871,52.5354065896739],[13.3436853120041,52.5361084963174],[13.3442984648827,52.5379814569504],[13.3445737523147,52.5385348360446],[13.3447376637081,52.5387486862468],[13.3406253334348,52.5392568033297],[13.3364887841506,52.54229747656],[13.3520124971804,52.5504678412703],[13.3591502191079,52.5463856752777],[13.3673441840743,52.5515491464452],[13.3690740119688,52.5485963324931],[13.3691710956057,52.5481411598538],[13.3720659656429,52.5487044908103],[13.3739382198435,52.547596560485],[13.3814489905016,52.5522648764776],[13.3825181048003,52.5518444415707],[13.3836242595285,52.5513104124312],[13.3863071356174,52.5534209965019],[13.3897410503763,52.5554261260642],[13.3914426191513,52.555295148227],[13.3921316295279,52.555183190244],[13.3924363647124,52.5555998660305],[13.3939385956265,52.5564473651593],[13.394211832649,52.5562734034185],[13.3942419609805,52.5560250608256],[13.3948979532132,52.5556281062779],[13.3963600781691,52.5555944548401],[13.3990093443734,52.5549722422453],[13.4015493279281,52.5548569953792],[13.4026103910553,52.5547862625399],[13.4027589826332,52.5557212413217],[13.4090125301214,52.5554230958449],[13.4124907305028,52.5552117031211],[13.4125668076002,52.5552020681343],[13.4126224939414,52.5551819223467],[13.4126604215641,52.5551442585056],[13.4126630536036,52.5550882006434],[13.4132617123328,52.5550798661652],[13.413809968898,52.5549421569451],[13.4146179789052,52.5549624601258],[13.4145891040797,52.5552490987147],[13.4144299797936,52.5561624467856],[13.4184082420691,52.5561731991336],[13.418424201197,52.5550801590198],[13.420792788491,52.5550842536386],[13.4235173071306,52.5550940420089],[13.4256030501239,52.5551044900264],[13.429206114594,52.5563893739165],[13.4298142363416,52.5541918816323],[13.4305030596676,52.5519724733159],[13.430901633439,52.5519034174207],[13.4315450496135,52.552198217722],[13.4411826403317,52.5495067404654],[13.4467472405024,52.5477109670002],[13.4476991729899,52.5472280662728],[13.44807764744,52.5469141536741],[13.4517491780784,52.5453749710409],[13.4522028191724,52.5453202382351],[13.4534370549339,52.5446868114656],[13.4532092439241,52.5443700944484],[13.4550993364278,52.5436385993203],[13.4578425646755,52.5425053541137],[13.476462481726408,52.59319242026839],[13.534349548998197,52.5934587808886],[13.549467711429632,52.58927529584906],[13.54756888696318,52.57819943233667],[13.555194155168213,52.57098149334696],[13.568497031963833,52.56710930152712],[13.545802436475302,52.536975016102986],[13.527502615307187,52.529301707468434],[13.516653436148228,52.52613698219089],[13.514811834116593,52.52558059054911],[13.511529769748673,52.52230733106905],[13.504387929801773,52.52042335218266],[13.503400703043052,52.517182774216316],[13.500592212990952,52.5161789447091],[13.49810253101471,52.51506232303545],[13.495496204926841,52.51532592389219],[13.486900653810656,52.512754668151395],[13.49245254179158,52.511864157889505],[13.498998354220522,52.510868599878194],[13.4878325398949,52.5068237868802],[13.487121873502,52.5064930687963],[13.488049073091,52.5053696751539],[13.4834874288811,52.5033743991116],[13.4833437765439,52.5033204330653],[13.4834675424036,52.503065309036],[13.4829843747102,52.5029485446372],[13.4826656352341,52.5028258922144],[13.4813150781366,52.5025335320349],[13.4814081766798,52.5020061199015],[13.4778869028395,52.5017532679302],[13.4771078742168,52.5016926822079],[13.4753966040135,52.5019851402551],[13.4751834312623,52.501505408169],[13.4737324125126,52.5017224036707],[13.473605291934,52.5013913258613],[13.4718837463947,52.5016406993537],[13.4720150851328,52.5019745068382],[13.4696473315785,52.5023224667871],[13.469243715968,52.5017779276561],[13.4685778854095,52.5001900520045],[13.4680731841352,52.4988275844123],[13.4679149709904,52.4985045196098],[13.4675416847512,52.4980206193587],[13.4670137932173,52.4975565904997],[13.4661093517052,52.4968489830712],[13.4639923011611,52.495423069202],[13.462651967447,52.4941769633894],[13.4613076891601,52.4928731815848],[13.4609009624328,52.4923561439914],[13.4596895419595,52.4912050329811],[13.4590102041294,52.4908386199038],[13.4584688028208,52.489830743257],[13.4582636243998,52.4890801716444],[13.458146699202,52.4884540491169],[13.458219113709,52.4880681141052],[13.4584312481016,52.4874163515022],[13.4586470931277,52.4868195506993],[13.4591618341332,52.4862082228389],[13.4584546500058,52.4857639118166],[13.4583430970328,52.4858360466053],[13.4578359815292,52.4854710735078],[13.455163282453226,52.48359106424741],[13.451338117665312,52.48074504858855],[13.4478822283603,52.4778478250408],[13.4501473830921,52.4767449762499],[13.4497976090434,52.4763302306166],[13.4495829377772,52.4761498941575],[13.4493690393829,52.4759552418509],[13.4488410373376,52.4755919545208],[13.4493255747113,52.4750905200777],[13.4494118978994,52.4747701425659],[13.4494706540439,52.4745181308146],[13.4494272575492,52.4743256321663],[13.4493223883703,52.474074233066],[13.4491348010137,52.4735622392367],[13.448531358994,52.4730439066655],[13.4482262753638,52.4727934251782],[13.4474480585201,52.4725788919866],[13.4468551588026,52.4724672692807],[13.44569830877223,52.47194990533332],[13.444133035481942,52.47171816844404],[13.442917891536,52.4716713726546],[13.4430936655936,52.4705732985882],[13.4415074104637,52.4704126022052],[13.4416604879344,52.4697109752676],[13.4414324316086,52.4697416007128],[13.4388947420906,52.469511138779],[13.4356861461231,52.4690992445778],[13.4358651337135,52.4685376424543],[13.4311034384814,52.4678405413358],[13.4299913300317,52.4698497768513],[13.4297088775731,52.470356356758],[13.420471946875,52.4692975716908],[13.419794527287,52.4720447042188],[13.4188606120749,52.4753855528238],[13.4185606490029,52.4765476125236],[13.4183222492592,52.4767281110493],[13.4182731820063,52.4767922026282],[13.417906039551,52.4781628144417],[13.417872881957,52.4783467909773],[13.4178948841912,52.4784971195262],[13.4182010010637,52.4793345209721],[13.4180857606942,52.479738151104],[13.4179119387767,52.479719688249],[13.4178221227734,52.4800448521719],[13.4178702963273,52.4801488546409],[13.4184010124284,52.480084454202],[13.4189835639606,52.4800437309754],[13.4193088567303,52.4800726970549],[13.4196799896138,52.4800859765173],[13.4209846616931,52.4802420690586],[13.4209397478759,52.4804346880468],[13.4208889743097,52.4819805899558],[13.4207090738622,52.4819610757511],[13.4205994756877,52.4820186913481],[13.4205377208397,52.4820983326123],[13.4204087269826,52.4822203348531],[13.4203330710061,52.482927358295],[13.4203897389641,52.4832892355417],[13.4215303581696,52.4833107374845],[13.4214966443081,52.4840068755303],[13.42236492737,52.4840132721348],[13.4223587381356,52.4841275778769],[13.4231525123591,52.4841350495152],[13.4231562970792,52.4847846768315],[13.4224906086894,52.4848193318594],[13.4209056640417,52.4848155272637],[13.4210077994577,52.4862432487973],[13.4204581966245,52.4862630929275],[13.4202864380004,52.4863091426431],[13.4205897293068,52.487196785864],[13.418610406571,52.4874690194077],[13.4184616852665,52.4870888384915],[13.4152903429949,52.4875122941207],[13.4153969138788,52.4877996305529],[13.4154608423519,52.4879670611539],[13.413952719438,52.4881592915834],[13.4139034911218,52.4880302886773],[13.4137690390484,52.4876629529919],[13.4099795281239,52.4881146785308],[13.4099188611824,52.4878811536797],[13.4098932871974,52.4873940849232],[13.4089163673981,52.4872137173029],[13.4087388286449,52.487238004088],[13.4082195719351,52.4871210901168],[13.4081789833604,52.4870129653515],[13.4080995489433,52.4869032464055],[13.4078770349709,52.4867076085044],[13.4073302915742,52.4861972724624],[13.404357979405,52.485084311774],[13.4014609364901,52.4850845110361],[13.4002101027977,52.4836938131295],[13.3987342268689,52.4838419206299],[13.3943636136771,52.4839455696295],[13.3932474556459,52.4841379707811],[13.3880968975806,52.4844339369616],[13.386870203664,52.4847964808113],[13.3858986474706,52.4849592591428],[13.3713006548969,52.4850788321372],[13.3702929239534,52.4850740192467],[13.3662253890738,52.4782115648496],[13.3659148466105,52.4782660392569],[13.3654471488333,52.4774368107621],[13.3653210615897,52.47739605829],[13.3650501510507,52.4773668660921],[13.3648006533335,52.477369446966],[13.3639122236609,52.477965558686],[13.3634270181187,52.4781946921567],[13.3626266824489,52.4784625811288],[13.3605450272002,52.4791279149658],[13.3584148090341,52.4796908506189],[13.3570718602082,52.4798508870877],[13.3555006463659,52.479804096238],[13.3533769440718,52.4794962901213],[13.3520805658634,52.4789151648831],[13.3511645717262,52.4783824121061],[13.3505627457351,52.4787797737784],[13.3500687485181,52.4788113522509],[13.3488883783529,52.4785618405821],[13.3455624765502,52.4778178658014],[13.3448694167792,52.4782218415676],[13.3438922003544,52.4785387851427],[13.3428645235464,52.480700322039],[13.3421496463458,52.4826214962176],[13.3423840261352,52.4827111705887],[13.3450366679976,52.4826916985793],[13.3450612257731,52.4837287814019],[13.3450208749517,52.4838247378756],[13.3449871284633,52.4841983113455],[13.3438919457008,52.4842046743256],[13.3438991893978,52.4838986900768],[13.3432263057575,52.4838961909024],[13.3425874741232,52.4837528098408],[13.340369151678,52.4831623644647],[13.3383464875707,52.4823403560727],[13.3380780202448,52.4825815455729],[13.3371558498225,52.4822086536317],[13.337081211763,52.4822113791834],[13.3368977511837,52.4822810811744],[13.3359470379199,52.4818538987056],[13.3353476551939,52.4817027974668],[13.3348357615826,52.4816287280626],[13.3342842016225,52.4816305819681],[13.3337758658364,52.4817166056533],[13.3334201427056,52.4818022241965],[13.3332675300494,52.4818026291696],[13.3324481634707,52.4822905001259],[13.3309344009166,52.4831685584396],[13.3306328541162,52.4832468556651],[13.328583344779,52.4837239586789],[13.3284761356863,52.4838263546488],[13.3254026574357,52.4841882671648],[13.3246447163799,52.484228123754],[13.3234949767369,52.4842043882784],[13.3225840157321,52.4841870628449],[13.3223481148028,52.4842357085239],[13.3220016223339,52.4843801054949],[13.3214564351897,52.484070248327],[13.3202875984634,52.483683354664],[13.3202230011302,52.4838719669156],[13.320190702464,52.4841109083539],[13.3156440439821,52.484118490836],[13.3157009469454,52.4865046142456],[13.3155781045611,52.486533399755],[13.3156793229611,52.4888870828366],[13.3159803465095,52.4890919987251],[13.3148479042442,52.4899798943534],[13.3127771534966,52.4913651971953],[13.3111607184091,52.492626420675],[13.3100838387671,52.4936096402341],[13.3090193665402,52.4945963504136],[13.3085837639634,52.4952998155902],[13.3078858703568,52.49714627906],[13.3052742587916,52.496851580213],[13.3052109769599,52.4970739247136],[13.3049786162354,52.4972237240646],[13.3055704623039,52.4976789660583],[13.3053194367762,52.4978009682333],[13.3052993637175,52.4978883989224],[13.3055144125644,52.4996084868389],[13.3055861132948,52.499732390778],[13.3038470305565,52.4994043618939],[13.303934539039,52.5002178165888],[13.3038669958927,52.5019949889108],[13.3006023149037,52.5019452387247],[13.3007521506356,52.5032325719444],[13.3002211139006,52.504296710832],[13.2993072581054,52.5041126996664],[13.2991874517076,52.504296326944],[13.2954842785749,52.5034464325126],[13.2944834767674,52.50510199396],[13.2937833263994,52.5053218301938],[13.2950978300845,52.5068186930823],[13.2958333164713,52.5080870088408],[13.2938127181826,52.5087221658534],[13.2936781404903,52.5087901695281],[13.2915826015191,52.5103213332858],[13.2915549800713,52.5106111591708],[13.2922243662344,52.5106514493345],[13.2922063405214,52.5108442316177],[13.2922618804685,52.5109586607563],[13.2935176870517,52.5119029761871],[13.2939199048813,52.5122414800743],[13.294536214971,52.5130429255313],[13.2944683149525,52.5134262368028],[13.2966554566616,52.5135855678942],[13.2967006062921,52.5134449204846],[13.2968175779404,52.5133683794867],[13.297005634237,52.5133892787172],[13.2971166946962,52.5135075454144],[13.301197866249,52.5134586822097],[13.3005842304443,52.5171074857231],[13.3018392766246,52.517173185234],[13.3018395040249,52.5172458900204],[13.3019032753679,52.5173037322555],[13.3020480862028,52.5174124111845],[13.3022225868866,52.5174896617472],[13.3023989067716,52.5175425853538],[13.3026997420958,52.5175363473327],[13.3028812211358,52.5174888445669],[13.3030484735359,52.5173798282014],[13.3031182000615,52.5172458592542],[13.3065961617916,52.5174262644244],[13.315186156921,52.5146510657833],[13.3186426733359,52.5190881972565],[13.3187971347128,52.5192080593521],[13.3192759570819,52.5194605697783],[13.3173165644675,52.5203369259656],[13.3178726162716,52.5209281582161],[13.3182695445048,52.521735465517],[13.3185557416697,52.522910779911],[13.3190913296482,52.5237706165925]]]}},"self_delivery":false,"payment_method_restrictions":null,"discounts_restrictions_text":"The following categories are excluded from offers: tobacco, nicotine products, smokers items and accessories and lottery scratchcards","preorder_specs":{"preorder_only":false,"time_step":5,"homedelivery_spec":{"earliest_timedelta":60,"latest_timedelta":8,"preorder_times":{"monday":[{"type":"open","value":0}],"tuesday":null,"wednesday":null,"thursday":null,"friday":null,"saturday":null,"sunday":[{"type":"close","value":86400}]}},"takeaway_spec":{"earliest_timedelta":45,"latest_timedelta":8,"preorder_times":{"monday":[{"type":"open","value":0}],"tuesday":null,"wednesday":null,"thursday":null,"friday":null,"saturday":null,"sunday":[{"type":"close","value":86400}]}},"eatin_spec":null},"group_order_id":""},"is_venue_favourite":false,"order_status":{"value":""},"order_minimum":1000,"do_use_backend_pricing":"no"}"""
    val HAA_TOKYO_DYNAMIC_RESPONSE = """{"venue":{"delivery_open_status":{"value":"Open all day","style":{"icon":null,"type":"OPEN"},"is_open":true,"now":"2025-01-26T21:26:48.064335+09:00","previous_open":null,"next_open":null,"next_close":null,"next_close_time_localized":null},"id":"677faa42ebfdaa6f4a597064","open_status":{"value":"Open all day","style":{"icon":null,"type":"OPEN"},"is_open":true,"now":"2025-01-26T21:26:48.064335+09:00","previous_open":null,"next_open":null,"next_close":null,"next_close_time_localized":null},"online":true,"time_slots_schedule":null,"banners":[],"header":{"delivery_method_default":"UNAVAILABLE","delivery_method_statuses":[{"delivery_method":"UNAVAILABLE","metadata":[{"type":"STRING","link":null,"icon":null,"style":"NORMAL","value":"Open all day"},{"type":"STRING","link":null,"icon":null,"style":"NORMAL","value":"Min. order ¥700"}],"call_to_action":{"icon":"LOCATION","style":"NO_FILL","enabled":true,"configurable":false,"value":"Choose location"},"group_order_button":{"enabled":false,"visible":false},"notification":null,"disclaimer":null}]},"delivery_configs":[]},"venue_raw":{"id":"677faa42ebfdaa6f4a597064","favourite":false,"preestimate_total":{"min":35,"max":45,"mean":40},"preestimate_preparation":{"min":10,"max":30,"mean":20},"alive":true,"applepay_callback_flow_enabled":false,"googlepay_callback_flow_enabled":false,"discounts":[],"surcharges":[],"delivery_specs":{"delivery_enabled":true,"order_minimum_no_surcharge":700,"order_minimum_possible":700,"delivery_times":{"monday":[{"type":"open","value":0}],"tuesday":null,"wednesday":null,"thursday":null,"friday":null,"saturday":null,"sunday":[{"type":"close","value":86400}]},"original_delivery_price":49,"delivery_pricing":{"base_price":49,"price_ranges":[{"min":0,"max":700,"a":700,"b":-1.0,"flag":null,"custom_distance_ranges":null},{"min":700,"max":0,"a":0,"b":0.0,"flag":null,"custom_distance_ranges":null}],"distance_ranges":[{"min":0,"max":500,"a":0,"b":0.0,"flag":null},{"min":500,"max":1000,"a":30,"b":0.0,"flag":null},{"min":1000,"max":1500,"a":50,"b":0.0,"flag":null},{"min":1500,"max":2000,"a":50,"b":1.0,"flag":null},{"min":2000,"max":0,"a":0,"b":0.0,"flag":null}],"meta":{"subscription_minimum_basket":null,"subscription_max_distance":null,"subscription_plan_id":null}},"delivery_pricing_with_subscription":null,"delivery_pricing_without_subscription":null,"geo_range":{"bbox":null,"type":"Polygon","coordinates":[[[139.64860463001352,35.65573170145694],[139.64857897329244,35.65797009072601],[139.64873972673234,35.658542406960805],[139.64870705430582,35.65908120718717],[139.64821296608426,35.6602799901988],[139.64783994317082,35.66163252416035],[139.64769040985777,35.66237614940301],[139.64747522780618,35.662947097505565],[139.64724991487964,35.663521045166455],[139.6470509427421,35.663994989748744],[139.6468114471025,35.66478384037048],[139.6466866351293,35.665089375066614],[139.6464370111829,35.665700444458885],[139.6461894170102,35.666044189044044],[139.64598316441163,35.666436358362624],[139.644124585153,35.67011263874437],[139.6449329323947,35.670807073126504],[139.64539443861577,35.67209208280998],[139.6471450350924,35.673216211903856],[139.64873439930756,35.67584262733999],[139.6498640193974,35.677602825699324],[139.65126673517304,35.68008613837202],[139.65366130046908,35.68099592185826],[139.6555125539412,35.68030871249306],[139.65677523367117,35.6799933580582],[139.65661071284052,35.682398324957425],[139.66128455568156,35.68176501852655],[139.66193471512292,35.68332050193162],[139.66349090011175,35.682793471949694],[139.66471937373032,35.68406710934007],[139.66513843589115,35.684661734223766],[139.66764975011574,35.684598252190305],[139.66875012798806,35.685053786569284],[139.6691320971507,35.685359848544465],[139.6705509011548,35.685063537551486],[139.67263391327228,35.68534491862913],[139.6724830878262,35.686386748307214],[139.6746063172344,35.68658365444854],[139.67914085453543,35.68789206501283],[139.6823537407888,35.688877971176815],[139.68735441374588,35.691135935458234],[139.68892170367405,35.68893326330435],[139.68938173833828,35.686148685046426],[139.6908302500841,35.68402896990271],[139.69357273742625,35.686474583475736],[139.70010214114575,35.68897833556754],[139.70442400771356,35.689515016195585],[139.7057739428925,35.6890172197458],[139.7134041842084,35.68674355388691],[139.72236715557813,35.687816615969986],[139.72930426626505,35.6859194236293],[139.73746591142003,35.68353168510174],[139.73878233770648,35.67890280958127],[139.74602128311597,35.679704519665506],[139.74933495118455,35.67678121145323],[139.7535829917177,35.67760629528407],[139.75950543626328,35.67525770028682],[139.7636891268496,35.67221275640007],[139.76648900698478,35.66990836244884],[139.77014303504464,35.66698399330963],[139.77189947425768,35.66519855819291],[139.77446226485435,35.66273012733961],[139.7715213425472,35.65928924557991],[139.76512208316836,35.65578499996205],[139.7629842070234,35.65153806424486],[139.7616093288662,35.651988085856004],[139.7597287152849,35.64560597059706],[139.76076923434874,35.64554409339006],[139.76026934453836,35.62766705755952],[139.76026884049918,35.62418809575482],[139.76022390880982,35.622592794092455],[139.76000575225777,35.61779147891419],[139.75470196865592,35.61827437599155],[139.75150522247122,35.61780155297467],[139.75085866755796,35.60653340894844],[139.74980215910102,35.60577230635508],[139.74905068883356,35.60425684617411],[139.74755919707638,35.60276989423723],[139.743409581356,35.60272943004213],[139.7425027355643,35.60016374342639],[139.74195431646382,35.59607448821961],[139.73839222290434,35.59677809020607],[139.73749285385102,35.59709555011801],[139.73270915069224,35.598199356276595],[139.73204179748376,35.598476626299615],[139.73135480270423,35.59886569243475],[139.73060315255637,35.59909523451549],[139.72543011443054,35.59908150259896],[139.72418428652963,35.599407328857176],[139.72286910136498,35.60012086908064],[139.72201804333787,35.60023454548506],[139.7213343339714,35.60032861115485],[139.71930194841087,35.60003089086827],[139.71770548185228,35.599695605706096],[139.7160249342664,35.59955522275767],[139.71471644424264,35.59997652119071],[139.71367906156934,35.600128244423985],[139.7131440689408,35.60038209087724],[139.71268456639837,35.60040177509862],[139.71178336963646,35.59557630383682],[139.70121439239318,35.600663532431824],[139.69764480983042,35.6037086234613],[139.69668533945134,35.60501557998732],[139.69614610515555,35.605605022115455],[139.69566647298345,35.60640807214949],[139.69407160156806,35.60853096647199],[139.691060798735,35.61055600922889],[139.68720685477527,35.61300783210365],[139.6832001741986,35.61587525656775],[139.68134499166143,35.61551272323591],[139.67929259281436,35.61506726280151],[139.67716665795263,35.61493268146738],[139.67375232554636,35.61479363031846],[139.67329599563516,35.61431733072121],[139.67297835893072,35.614543165016016],[139.6698844332351,35.61428757704405],[139.6697626690755,35.614907612600675],[139.66946045808368,35.615576546178],[139.66796541699935,35.61321960868503],[139.6664473100986,35.61381454379513],[139.66443368249327,35.613843690152805],[139.65833540106755,35.61374292828391],[139.6498063043403,35.611361305055254],[139.6481773353725,35.6133126311571],[139.64673814953775,35.616860771920756],[139.6485766657396,35.62033737785401],[139.65082170633607,35.62332216693017],[139.6486264555694,35.62420863001175],[139.645662294658,35.62622110316386],[139.64044364442358,35.62865450917478],[139.63947782792394,35.630606854802956],[139.6380417872457,35.63309259578375],[139.63737789037043,35.63451741500048],[139.63652768795467,35.63659762111203],[139.63533129555128,35.63757491070199],[139.63466930398096,35.63888382847563],[139.642687631785,35.64097665463656],[139.64428842111622,35.64162732903528],[139.64474767007084,35.642116064130676],[139.6449354422573,35.643338656196065],[139.64618194793218,35.64319280003161],[139.64466942483702,35.64576697355669],[139.6445169140241,35.64628634003639],[139.6445222083355,35.646564668244764],[139.644686469053,35.648289259027464],[139.6452503846567,35.64912997928399],[139.64567677700882,35.65051969764046],[139.6433458146344,35.65101780057314],[139.64335819569544,35.65248109614991],[139.6431162390044,35.65261167548282],[139.64305469859153,35.65281842498124],[139.64494584915366,35.65321027394353],[139.64633504002572,35.65356547650484],[139.6468249256398,35.65364572555013],[139.6470886151323,35.65380573290008],[139.64718739421843,35.65401573013142],[139.6473337834451,35.65422572736276],[139.64749690340878,35.654541959267235],[139.64788097533142,35.65475615432555],[139.64818475266276,35.655335473157905],[139.64860463001352,35.65573170145694]]]}},"self_delivery":false,"payment_method_restrictions":null,"discounts_restrictions_text":"The following categories are excluded from offers: tobacco, newspaper, magazines and lottery scratchcards","preorder_specs":{"preorder_only":false,"time_step":5,"homedelivery_spec":{"earliest_timedelta":60,"latest_timedelta":8,"preorder_times":{"monday":[{"type":"open","value":0}],"tuesday":null,"wednesday":null,"thursday":null,"friday":null,"saturday":null,"sunday":[{"type":"close","value":86400}]}},"takeaway_spec":{"earliest_timedelta":45,"latest_timedelta":8,"preorder_times":{"monday":[{"type":"open","value":0}],"tuesday":null,"wednesday":null,"thursday":null,"friday":null,"saturday":null,"sunday":[{"type":"close","value":86400}]}},"eatin_spec":null},"group_order_id":""},"is_venue_favourite":false,"order_status":{"value":""},"order_minimum":700,"do_use_backend_pricing":"no"}"""

    val engine = MockEngine { request ->
        handleRequest(request)!!
    }

    fun MockRequestHandleScope.handleRequest(request: HttpRequestData) : HttpResponseData? {
        val contentData : String

        if (request.url.encodedPath.contains("static")){
            contentData = when {
                request.url.encodedPath.contains("helsinki") -> HAA_HELSINKI_STATIC_RESPONSE
                request.url.encodedPath.contains("stockholm") -> HAA_STOCKHOLM_STATIC_RESPONSE
                request.url.encodedPath.contains("berlin") -> HAA_BERLIN_STATIC_RESPONSE
                request.url.encodedPath.contains("tokyo") -> HAA_TOKYO_STATIC_RESPONSE
                else -> "{}"
            }
        }
        else if(request.url.encodedPath.contains("dynamic")) {
            contentData = when {
                request.url.encodedPath.contains("helsinki") -> HAA_HELSINKI_DYNAMIC_RESPONSE
                request.url.encodedPath.contains("stockholm") -> HAA_STOCKHOLM_DYNAMIC_RESPONSE
                request.url.encodedPath.contains("berlin") -> HAA_BERLIN_DYNAMIC_RESPONSE
                request.url.encodedPath.contains("tokyo") -> HAA_TOKYO_DYNAMIC_RESPONSE
                else -> "{}"
            }
        } else return null

        return respond(
            content = contentData,
            status = HttpStatusCode.OK,
            headers = headersOf(HttpHeaders.ContentType, "application/json")
        )
    }
}